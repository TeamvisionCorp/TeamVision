webpackJsonp([0],{"/VBd":function(e,t){},"5xrT":function(e,t){},DAYN:function(e,t,n){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){function t(e){function t(e){e.parentElement.removeChild(e)}function n(e,t,n){var i=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,i)}function o(e,t){var n=this;this.$nextTick(function(){return n.$emit(e.toLowerCase(),t)})}var a=["Start","Add","Remove","Update","End"],s=["Choose","Sort","Filter","Clone"],l=["Move"].concat(a,s).map(function(e){return"on"+e}),u=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(e){var t=this.$slots.default;if(t&&1===t.length){var n=t[0];n.componentOptions&&"transition-group"===n.componentOptions.tag&&(this.transitionMode=!0)}var i=t,o=this.$slots.footer;o&&(i=t?[].concat(r(t),r(o)):[].concat(r(o)));var a=null,s=function(e,t){a=function(e,t,n){return void 0==n?e:((e=null==e?{}:e)[t]=n,e)}(a,e,t)};if(s("attrs",this.$attrs),this.componentData){var l=this.componentData,u=l.on,c=l.props;s("on",u),s("props",c)}return e(this.element,a,i)},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var n={};a.forEach(function(e){n["on"+e]=function(e){var t=this;return function(n){null!==t.realList&&t["onDrag"+e](n),o.call(t,e,n)}}.call(t,e)}),s.forEach(function(e){n["on"+e]=o.bind(t,e)});var r=i({},this.options,n,{onMove:function(e,n){return t.onDragMove(e,n)}});!("draggable"in r)&&(r.draggable=">*"),this._sortable=new e(this.rootContainer,r),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){for(var t in e)-1==l.indexOf(t)&&this._sortable.option(t,e[t])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=function(e,t,n){if(!e)return[];var i=e.map(function(e){return e.elm}),o=[].concat(r(t)).map(function(e){return i.indexOf(e)});return n?o.filter(function(e){return-1!==e}):o}(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode)})},getUnderlyingVm:function(e){var t=function(e,t){return e.map(function(e){return e.elm}).indexOf(t)}(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&"transition-group"===t.$options._componentTag?t.$parent:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=[].concat(r(this.value));e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,e)};this.alterList(t)},updatePosition:function(e,t){var n=function(n){return n.splice(t,0,n.splice(e,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(e){var t=e.to,n=e.related,r=this.getUnderlyingPotencialDraggableComponent(t);if(!r)return{component:r};var o=r.realList,a={list:o,component:r};if(t!==n&&o&&r.getUnderlyingVm){var s=r.getUnderlyingVm(n);if(s)return i(s,a)}return a},getVmIndex:function(e){var t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),u=e.item},onDragAdd:function(e){var n=e.item._underlying_vm_;if(void 0!==n){t(e.item);var i=this.getVmIndex(e.newIndex);this.spliceList(i,0,n),this.computeIndexes();var r={element:n,newIndex:i};this.emitChanges({added:r})}},onDragRemove:function(e){if(n(this.rootContainer,e.item,e.oldIndex),this.isCloning)t(e.clone);else{var i=this.context.index;this.spliceList(i,1);var r={element:this.context.element,oldIndex:i};this.resetTransitionData(i),this.emitChanges({removed:r})}},onDragUpdate:function(e){t(e.item),n(e.from,e.item,e.oldIndex);var i=this.context.index,r=this.getVmIndex(e.newIndex);this.updatePosition(i,r);var o={element:this.context.element,oldIndex:i,newIndex:r};this.emitChanges({moved:o})},computeFutureIndex:function(e,t){if(!e.element)return 0;var n=[].concat(r(t.to.children)).filter(function(e){return"none"!==e.style.display}),i=n.indexOf(t.related),o=e.component.getVmIndex(i);return-1!=n.indexOf(u)||!t.willInsertAfter?o:o+1},onDragMove:function(e,t){var n=this.move;if(!n||!this.realList)return!0;var r=this.getRelatedContextFromMoveEvent(e),o=this.context,a=this.computeFutureIndex(r,e);return i(o,{futureIndex:a}),i(e,{relatedContext:r,draggedContext:o}),n(e,t)},onDragEnd:function(e){this.computeIndexes(),u=null}}}}Array.from||(Array.from=function(e){return[].slice.call(e)});var o=n("Lokx");e.exports=t(o)}()},HA7x:function(e,t,n){"use strict";var i=n("Dd8w"),r=n.n(i),o=n("NYxO"),a=n("h/Zt"),s={name:"TaskFlowSectionCreateDialog",props:["flowID","sectionID"],data:function(){return{currentFlow:{},formItem:{SectionName:"",TaskFlow:0,SectionOrder:0},ruleCustom:{SectionName:[{type:"string",required:!0,min:1,max:50,message:"阶段名称长度必须在1-50个字符之间！",trigger:"blur"}]}}},computed:r()({},Object(o.c)("citaskflow",["addedSectionDialogShow","renameSectionDialogShow"]),{taskFlowID:function(){return this.flowID+""=="undefined"?0:this.flowID},showDialog:function(){return this.renameSectionDialogShow||this.addedSectionDialogShow},dialogTitle:function(){return this.addedSectionDialogShow?"添加阶段":this.renameSectionDialogShow?"重命名阶段":void 0}}),methods:r()({},Object(o.d)("citaskflow",["setAddedSectionDialogShow","setAddedSection","setRenameSectionDialogShow","setSectionRenamed"]),{addSection:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.addedSectionDialogShow&&(t.formItem.SectionOrder=t.currentFlow.MaxOrder+1,t.formItem.TaskFlow=t.currentFlow.id,t.$axios.post("/api/ci/task_flow/"+t.taskFlowID+"/sections",t.formItem).then(function(e){t.setAddedSection(!0),t.setAddedSectionDialogShow(!1)},function(e){t.setAddedSectionDialogShow(!1),t.$Message.error({content:"创建工作流阶段失败，请联系管理员或者重试",duration:10})})),t.renameSectionDialogShow&&t.$axios.patch("/api/ci/task_flow/section/"+t.sectionID,{SectionName:t.formItem.SectionName}).then(function(e){t.setSectionRenamed(!0),t.setRenameSectionDialogShow(!1)},function(e){t.setRenameSectionDialogShow(!1),t.$Message.error({content:"重命名工作流阶段失败，请联系管理员或者重试",duration:10})}))})},cancel:function(){this.setAddedSectionDialogShow(!1),this.setRenameSectionDialogShow(!1)},loadFlowTasks:function(e){var t=this;e+""!="0"&&this.$axios.get("/api/ci/task_flow/"+e+"/").then(function(e){t.currentFlow=e.data.result},function(e){})},loadMyCITasks:function(){this.$axios.get("/api/ci/task_basic/my?page_size=10000").then(function(e){e.data.result.results},function(e){})},loadSection:function(e){var t=this;e+""!="0"&&this.$axios.get("/api/ci/task_flow/section/"+e).then(function(e){t.formItem.SectionName=e.data.result.SectionName},function(e){})}}),created:function(){this.loadMyCITasks(),this.loadFlowTasks(this.taskFlowID)},mounted:function(){},watch:{flowID:function(e){this.loadFlowTasks(this.taskFlowID)},sectionID:function(){this.loadSection(this.sectionID)}},components:{FormItem:a.a}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{value:e.showDialog,title:e.dialogTitle,width:600,styles:{bottom:"20px",top:"50px"}},on:{"on-cancel":e.cancel}},[n("div",{staticStyle:{height:"100px","overflow-y":"scroll","overflow-x":"hidden"}},[n("Form",{ref:"ciSectionCreate",attrs:{model:e.formItem,"label-width":80,rules:e.ruleCustom,id:e.taskFlowID}},[n("FormItem",{attrs:{label:"阶段名称",prop:"SectionName"}},[n("Input",{attrs:{placeholder:"阶段名称50个字符以内！"},model:{value:e.formItem.SectionName,callback:function(t){e.$set(e.formItem,"SectionName",t)},expression:"formItem.SectionName"}})],1)],1)],1),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{staticStyle:{width:"80px",height:"30px"},attrs:{type:"success",shape:"circle"},on:{click:function(t){e.addSection("ciSectionCreate")}}},[e._v("确定")])],1)])},staticRenderFns:[]};var u=n("VU/8")(s,l,!1,function(e){n("/VBd")},"data-v-3119fe00",null);t.a=u.exports},Lokx:function(e,t,n){var i,r;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(o){"use strict";void 0===(r="function"==typeof(i=o)?i.call(t,n,t,e):i)||(e.exports=r)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,n,i,r,o,a,s,l,u,c,d,f,h,p,g,m,v,y,b,w,D={},S=/\s+/g,x=/left|right|inline/,_="Sortable"+(new Date).getTime(),T=window,C=T.document,k=T.parseInt,I=T.setTimeout,F=T.jQuery||T.Zepto,q=T.Polymer,O=!1,E="draggable"in C.createElement("div"),A=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((w=C.createElement("x")).style.cssText="pointer-events:auto","auto"===w.style.pointerEvents),M=!1,N=Math.abs,R=Math.min,P=[],$=[],B=ie(function(e,t,n){if(n&&t.scroll){var i,r,o,a,c,d,f=n[_],h=t.scrollSensitivity,p=t.scrollSpeed,g=e.clientX,m=e.clientY,v=window.innerWidth,y=window.innerHeight;if(l!==n&&(s=t.scroll,l=n,u=t.scrollFn,!0===s)){s=n;do{if(s.offsetWidth<s.scrollWidth||s.offsetHeight<s.scrollHeight)break}while(s=s.parentNode)}s&&(i=s,r=s.getBoundingClientRect(),o=(N(r.right-g)<=h)-(N(r.left-g)<=h),a=(N(r.bottom-m)<=h)-(N(r.top-m)<=h)),o||a||(a=(y-m<=h)-(m<=h),((o=(v-g<=h)-(g<=h))||a)&&(i=T)),D.vx===o&&D.vy===a&&D.el===i||(D.el=i,D.vx=o,D.vy=a,clearInterval(D.pid),i&&(D.pid=setInterval(function(){if(d=a?a*p:0,c=o?o*p:0,"function"==typeof u)return u.call(f,c,d,e);i===T?T.scrollTo(T.pageXOffset+c,T.pageYOffset+d):(i.scrollTop+=d,i.scrollLeft+=c)},24)))}},30),j=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=n.name),"function"==typeof e?e:function(n,i){var r=i.options.group.name;return t?e:e&&(e.join?e.indexOf(r)>-1:r==e)}}var n={},i=e.group;i&&"object"==typeof i||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){O={capture:!1,passive:!1}}}))}catch(e){}function L(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=re({},t),e[_]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==L.supportPointer};for(var i in n)!(i in t)&&(t[i]=n[i]);for(var r in j(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&E,X(e,"mousedown",this._onTapStart),X(e,"touchstart",this._onTapStart),t.supportPointer&&X(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(X(e,"dragover",this),X(e,"dragenter",this)),$.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function Y(t,n){"clone"!==t.lastPullMode&&(n=!0),i&&i.state!==n&&(z(i,"display",n?"none":""),n||i.state&&(t.options.group.revertClone?(r.insertBefore(i,o),t._animate(e,i)):r.insertBefore(i,e)),i.state=n)}function V(e,t,n){if(e){n=n||C;do{if(">*"===t&&e.parentNode===n||ne(e,t))return e}while(e=U(e))}return null}function U(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function X(e,t,n){e.addEventListener(t,n,O)}function W(e,t,n){e.removeEventListener(t,n,O)}function H(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(S," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(S," ")}}function z(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return C.defaultView&&C.defaultView.getComputedStyle?n=C.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function K(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function Z(e,t,n,r,o,a,s,l){e=e||t[_];var u=C.createEvent("Event"),c=e.options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);u.initEvent(n,!0,!0),u.to=o||t,u.from=a||t,u.item=r||t,u.clone=i,u.oldIndex=s,u.newIndex=l,t.dispatchEvent(u),c[d]&&c[d].call(e,u)}function J(e,t,n,i,r,o,a,s){var l,u,c=e[_],d=c.options.onMove;return(l=C.createEvent("Event")).initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=r||t,l.relatedRect=o||t.getBoundingClientRect(),l.willInsertAfter=s,e.dispatchEvent(l),d&&(u=d.call(c,l,a)),u}function G(e){e.draggable=!1}function Q(){M=!1}function ee(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function te(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!ne(e,t)||n++;return n}function ne(e,t){if(e){var n=(t=t.split(".")).shift().toUpperCase(),i=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==n&&e.nodeName.toUpperCase()!=n||t.length&&((" "+e.className+" ").match(i)||[]).length!=t.length)}return!1}function ie(e,t){var n,i;return function(){void 0===n&&(n=arguments,i=this,I(function(){1===n.length?e.call(i,n[0]):e.apply(i,n),n=void 0},t))}}function re(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function oe(e){return q&&q.dom?q.dom(e).cloneNode(!0):F?F(e).clone(!0)[0]:e.cloneNode(!0)}function ae(e){return I(e,0)}function se(e){return clearTimeout(e)}return L.prototype={constructor:L,_onTapStart:function(t){var n,i=this,r=this.el,o=this.options,s=o.preventOnFilter,l=t.type,u=t.touches&&t.touches[0],c=(u||t).target,d=t.target.shadowRoot&&t.path&&t.path[0]||c,f=o.filter;if(function(e){var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&P.push(i)}}(r),!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||o.disabled)&&!d.isContentEditable&&(c=V(c,o.draggable,r))&&a!==c){if(n=te(c,o.draggable),"function"==typeof f){if(f.call(this,t,c,this))return Z(i,d,"filter",c,r,r,n),void(s&&t.preventDefault())}else if(f&&(f=f.split(",").some(function(e){if(e=V(d,e.trim(),r))return Z(i,e,"filter",c,r,r,n),!0})))return void(s&&t.preventDefault());o.handle&&!V(d,o.handle,r)||this._prepareDragStart(t,u,c,n)}},_prepareDragStart:function(n,i,s,l){var u,c=this,d=c.el,f=c.options,p=d.ownerDocument;s&&!e&&s.parentNode===d&&(v=n,r=d,t=(e=s).parentNode,o=e.nextSibling,a=s,g=f.group,h=l,this._lastX=(i||n).clientX,this._lastY=(i||n).clientY,e.style["will-change"]="all",u=function(){c._disableDelayedDrag(),e.draggable=c.nativeDraggable,H(e,f.chosenClass,!0),c._triggerDragStart(n,i),Z(c,r,"choose",e,r,r,h)},f.ignore.split(",").forEach(function(t){K(e,t.trim(),G)}),X(p,"mouseup",c._onDrop),X(p,"touchend",c._onDrop),X(p,"touchcancel",c._onDrop),X(p,"selectstart",c),f.supportPointer&&X(p,"pointercancel",c._onDrop),f.delay?(X(p,"mouseup",c._disableDelayedDrag),X(p,"touchend",c._disableDelayedDrag),X(p,"touchcancel",c._disableDelayedDrag),X(p,"mousemove",c._disableDelayedDrag),X(p,"touchmove",c._disableDelayedDrag),f.supportPointer&&X(p,"pointermove",c._disableDelayedDrag),c._dragStartTimer=I(u,f.delay)):u())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),W(e,"mouseup",this._disableDelayedDrag),W(e,"touchend",this._disableDelayedDrag),W(e,"touchcancel",this._disableDelayedDrag),W(e,"mousemove",this._disableDelayedDrag),W(e,"touchmove",this._disableDelayedDrag),W(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(t,n){(n=n||("touch"==t.pointerType?t:null))?(v={target:e,clientX:n.clientX,clientY:n.clientY},this._onDragStart(v,"touch")):this.nativeDraggable?(X(e,"dragend",this),X(r,"dragstart",this._onDragStart)):this._onDragStart(v,!0);try{C.selection?ae(function(){C.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(r&&e){var t=this.options;H(e,t.ghostClass,!0),H(e,t.dragClass,!1),L.active=this,Z(this,r,"start",e,r,r,h)}else this._nulling()},_emulateDragOver:function(){if(y){if(this._lastX===y.clientX&&this._lastY===y.clientY)return;this._lastX=y.clientX,this._lastY=y.clientY,A||z(n,"display","none");var e=C.elementFromPoint(y.clientX,y.clientY),t=e,i=$.length;if(e&&e.shadowRoot&&(t=e=e.shadowRoot.elementFromPoint(y.clientX,y.clientY)),t)do{if(t[_]){for(;i--;)$[i]({clientX:y.clientX,clientY:y.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);A||z(n,"display","")}},_onTouchMove:function(e){if(v){var t=this.options,i=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,a=o.clientX-v.clientX+r.x,s=o.clientY-v.clientY+r.y,l=e.touches?"translate3d("+a+"px,"+s+"px,0)":"translate("+a+"px,"+s+"px)";if(!L.active){if(i&&R(N(o.clientX-this._lastX),N(o.clientY-this._lastY))<i)return;this._dragStarted()}this._appendGhost(),b=!0,y=o,z(n,"webkitTransform",l),z(n,"mozTransform",l),z(n,"msTransform",l),z(n,"transform",l),e.preventDefault()}},_appendGhost:function(){if(!n){var t,i=e.getBoundingClientRect(),o=z(e),a=this.options;H(n=e.cloneNode(!0),a.ghostClass,!1),H(n,a.fallbackClass,!0),H(n,a.dragClass,!0),z(n,"top",i.top-k(o.marginTop,10)),z(n,"left",i.left-k(o.marginLeft,10)),z(n,"width",i.width),z(n,"height",i.height),z(n,"opacity","0.8"),z(n,"position","fixed"),z(n,"zIndex","100000"),z(n,"pointerEvents","none"),a.fallbackOnBody&&C.body.appendChild(n)||r.appendChild(n),t=n.getBoundingClientRect(),z(n,"width",2*i.width-t.width),z(n,"height",2*i.height-t.height)}},_onDragStart:function(t,n){var o=this,a=t.dataTransfer,s=o.options;o._offUpEvents(),g.checkPull(o,o,e,t)&&((i=oe(e)).draggable=!1,i.style["will-change"]="",z(i,"display","none"),H(i,o.options.chosenClass,!1),o._cloneId=ae(function(){r.insertBefore(i,e),Z(o,r,"clone",e)})),H(e,s.dragClass,!0),n?("touch"===n?(X(C,"touchmove",o._onTouchMove),X(C,"touchend",o._onDrop),X(C,"touchcancel",o._onDrop),s.supportPointer&&(X(C,"pointermove",o._onTouchMove),X(C,"pointerup",o._onDrop))):(X(C,"mousemove",o._onTouchMove),X(C,"mouseup",o._onDrop)),o._loopId=setInterval(o._emulateDragOver,50)):(a&&(a.effectAllowed="move",s.setData&&s.setData.call(o,a,e)),X(C,"drop",o),o._dragStartId=ae(o._dragStarted))},_onDragOver:function(a){var s,l,u,h,p=this.el,v=this.options,y=v.group,w=L.active,D=g===y,S=!1,T=v.sort;if(void 0!==a.preventDefault&&(a.preventDefault(),!v.dragoverBubble&&a.stopPropagation()),!e.animated&&(b=!0,w&&!v.disabled&&(D?T||(h=!r.contains(e)):m===this||(w.lastPullMode=g.checkPull(this,w,e,a))&&y.checkPut(this,w,e,a))&&(void 0===a.rootEl||a.rootEl===this.el))){if(B(a,v,this.el),M)return;if(s=V(a.target,v.draggable,p),l=e.getBoundingClientRect(),m!==this&&(m=this,S=!0),h)return Y(w,!0),t=r,void(i||o?r.insertBefore(e,i||o):T||r.appendChild(e));if(0===p.children.length||p.children[0]===n||p===a.target&&function(e,t){var n=e.lastElementChild.getBoundingClientRect();return t.clientY-(n.top+n.height)>5||t.clientX-(n.left+n.width)>5}(p,a)){if(0!==p.children.length&&p.children[0]!==n&&p===a.target&&(s=p.lastElementChild),s){if(s.animated)return;u=s.getBoundingClientRect()}Y(w,D),!1!==J(r,p,e,l,s,u,a)&&(e.contains(p)||(p.appendChild(e),t=p),this._animate(l,e),s&&this._animate(u,s))}else if(s&&!s.animated&&s!==e&&void 0!==s.parentNode[_]){c!==s&&(c=s,d=z(s),f=z(s.parentNode));var C=(u=s.getBoundingClientRect()).right-u.left,k=u.bottom-u.top,F=x.test(d.cssFloat+d.display)||"flex"==f.display&&0===f["flex-direction"].indexOf("row"),q=s.offsetWidth>e.offsetWidth,O=s.offsetHeight>e.offsetHeight,E=(F?(a.clientX-u.left)/C:(a.clientY-u.top)/k)>.5,A=s.nextElementSibling,N=!1;if(F){var R=e.offsetTop,P=s.offsetTop;N=R===P?s.previousElementSibling===e&&!q||E&&q:s.previousElementSibling===e||e.previousElementSibling===s?(a.clientY-u.top)/k>.5:P>R}else S||(N=A!==e&&!O||E&&O);var $=J(r,p,e,l,s,u,a,N);!1!==$&&(1!==$&&-1!==$||(N=1===$),M=!0,I(Q,30),Y(w,D),e.contains(p)||(N&&!A?p.appendChild(e):s.parentNode.insertBefore(e,N?A:s)),t=e.parentNode,this._animate(l,e),this._animate(u,s))}}},_animate:function(e,t){var n=this.options.animation;if(n){var i=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),z(t,"transition","none"),z(t,"transform","translate3d("+(e.left-i.left)+"px,"+(e.top-i.top)+"px,0)"),t.offsetWidth,z(t,"transition","all "+n+"ms"),z(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=I(function(){z(t,"transition",""),z(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;W(C,"touchmove",this._onTouchMove),W(C,"pointermove",this._onTouchMove),W(e,"mouseup",this._onDrop),W(e,"touchend",this._onDrop),W(e,"pointerup",this._onDrop),W(e,"touchcancel",this._onDrop),W(e,"pointercancel",this._onDrop),W(e,"selectstart",this)},_onDrop:function(a){var s=this.el,l=this.options;clearInterval(this._loopId),clearInterval(D.pid),clearTimeout(this._dragStartTimer),se(this._cloneId),se(this._dragStartId),W(C,"mouseover",this),W(C,"mousemove",this._onTouchMove),this.nativeDraggable&&(W(C,"drop",this),W(s,"dragstart",this._onDragStart)),this._offUpEvents(),a&&(b&&(a.preventDefault(),!l.dropBubble&&a.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),r!==t&&"clone"===L.active.lastPullMode||i&&i.parentNode&&i.parentNode.removeChild(i),e&&(this.nativeDraggable&&W(e,"dragend",this),G(e),e.style["will-change"]="",H(e,this.options.ghostClass,!1),H(e,this.options.chosenClass,!1),Z(this,r,"unchoose",e,t,r,h),r!==t?(p=te(e,l.draggable))>=0&&(Z(null,t,"add",e,t,r,h,p),Z(this,r,"remove",e,t,r,h,p),Z(null,t,"sort",e,t,r,h,p),Z(this,r,"sort",e,t,r,h,p)):e.nextSibling!==o&&(p=te(e,l.draggable))>=0&&(Z(this,r,"update",e,t,r,h,p),Z(this,r,"sort",e,t,r,h,p)),L.active&&(null!=p&&-1!==p||(p=h),Z(this,r,"end",e,t,r,h,p),this.save()))),this._nulling()},_nulling:function(){r=e=t=n=o=i=a=s=l=v=y=b=p=c=d=m=g=L.active=null,P.forEach(function(e){e.checked=!0}),P.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.preventDefault()}(t));break;case"mouseover":this._onDrop(t);break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)V(e=n[i],o.draggable,this.el)&&t.push(e.getAttribute(o.dataIdAttr)||ee(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,i){var r=n.children[i];V(r,this.options.draggable,n)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return V(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&j(n)},destroy:function(){var e=this.el;e[_]=null,W(e,"mousedown",this._onTapStart),W(e,"touchstart",this._onTapStart),W(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(W(e,"dragover",this),W(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),$.splice($.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},X(C,"touchmove",function(e){L.active&&e.preventDefault()}),L.utils={on:X,off:W,css:z,find:K,is:function(e,t){return!!V(e,t,e)},extend:re,throttle:ie,closest:V,toggleClass:H,clone:oe,index:te,nextTick:ae,cancelNextTick:se},L.create=function(e,t){return new L(e,t)},L.version="1.7.0",L})},P7xe:function(e,t,n){"use strict";var i=n("DAYN"),r={name:"FlowSection",props:{columnID:{type:Number,required:!0},group:{type:String,required:!0},itemList:{type:Array,required:!0},columnTitle:{type:String,required:!0}},data:function(){return{appBodyHeight:863,columnItemHeight:200,columnItems:this.itemList}},computed:{},components:{draggable:n.n(i).a},methods:{onEnd:function(e){this.$emit("end",e),this.columnItemKey=(new Date).getTime()},handleReachBottom:function(){this.$emit("reachBottom",this.columnID)}},watch:{itemList:function(){this.columnItems=this.itemList}},created:function(){this.columnItems=this.itemList},mounted:function(){this.columnItemHeight=document.getElementById("appBody").offsetHeight-70}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{staticClass:"board-column",attrs:{"dis-hover":!0,bordered:!0,shadow:!1}},[e._t("column-header",[n("Card",{staticClass:"board-column-title",attrs:{bordered:!1,shadow:!1,"dis-hover":!0}},[e._v(e._s(e.columnTitle))])]),e._v(" "),n("Scroll",{attrs:{"on-reach-bottom":e.handleReachBottom,height:e.columnItemHeight}},[n("draggable",{attrs:{options:{group:e.group}},on:{end:e.onEnd},model:{value:e.columnItems,callback:function(t){e.columnItems=t},expression:"columnItems"}},[n("transition-group",{key:e.columnID,staticClass:"dragable-area",attrs:{id:e.columnID}},e._l(e.columnItems,function(t){return n("div",{key:t.id+""+t.UUID,attrs:{id:t.id}},[e._t("default",null,{element:t})],2)}))],1)],1)],2)},staticRenderFns:[]};var a=n("VU/8")(r,o,!1,function(e){n("5xrT")},"data-v-6a6215fe",null);t.a=a.exports},"h/Zt":function(e,t,n){"use strict";var i=n("bOdI"),r=n.n(i),o=n("Dd8w"),a=n.n(o),s=n("pFYg"),l=n.n(s),u=/%[sdj%]/g,c=function(){};function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=1,r=t[0],o=t.length;if("function"==typeof r)return r.apply(null,t.slice(1));if("string"==typeof r){for(var a=String(r).replace(u,function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch(e){return"[Circular]"}break;default:return e}}),s=t[i];i<o;s=t[++i])a+=" "+s;return a}return r}function f(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function h(e,t,n){var i=0,r=e.length;!function o(a){if(a&&a.length)n(a);else{var s=i;i+=1,s<r?t(e[s],o):n([])}}([])}function p(e,t,n,i){if(t.first)return h(function(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,e[n])}),t}(e),n,i);var r=t.firstFields||[];!0===r&&(r=Object.keys(e));var o=Object.keys(e),a=o.length,s=0,l=[],u=function(e){l.push.apply(l,e),++s===a&&i(l)};o.forEach(function(t){var i=e[t];-1!==r.indexOf(t)?h(i,n,u):function(e,t,n){var i=[],r=0,o=e.length;function a(e){i.push.apply(i,e),++r===o&&n(i)}e.forEach(function(e){t(e,a)})}(i,n,u)})}function g(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:t,field:t.field||e.fullField}}}function m(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];"object"===(void 0===i?"undefined":l()(i))&&"object"===l()(e[n])?e[n]=a()({},e[n],i):e[n]=i}return e}var v=function(e,t,n,i,r,o){!e.required||n.hasOwnProperty(e.field)&&!f(t,o||e.type)||i.push(d(r.messages.required,e.fullField))};var y=function(e,t,n,i,r){(/^\s+$/.test(t)||""===t)&&i.push(d(r.messages.whitespace,e.fullField))},b={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},w={integer:function(e){return w.number(e)&&parseInt(e,10)===e},float:function(e){return w.number(e)&&!w.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===(void 0===e?"undefined":l()(e))&&!w.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(b.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(b.url)},hex:function(e){return"string"==typeof e&&!!e.match(b.hex)}};var D="enum";var S={required:v,whitespace:y,type:function(e,t,n,i,r){if(e.required&&void 0===t)v(e,t,n,i,r);else{var o=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?w[o](t)||i.push(d(r.messages.types[o],e.fullField,e.type)):o&&(void 0===t?"undefined":l()(t))!==e.type&&i.push(d(r.messages.types[o],e.fullField,e.type))}},range:function(e,t,n,i,r){var o="number"==typeof e.len,a="number"==typeof e.min,s="number"==typeof e.max,l=t,u=null,c="number"==typeof t,f="string"==typeof t,h=Array.isArray(t);if(c?u="number":f?u="string":h&&(u="array"),!u)return!1;h&&(l=t.length),f&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?l!==e.len&&i.push(d(r.messages[u].len,e.fullField,e.len)):a&&!s&&l<e.min?i.push(d(r.messages[u].min,e.fullField,e.min)):s&&!a&&l>e.max?i.push(d(r.messages[u].max,e.fullField,e.max)):a&&s&&(l<e.min||l>e.max)&&i.push(d(r.messages[u].range,e.fullField,e.min,e.max))},enum:function(e,t,n,i,r){e[D]=Array.isArray(e[D])?e[D]:[],-1===e[D].indexOf(t)&&i.push(d(r.messages[D],e.fullField,e[D].join(", ")))},pattern:function(e,t,n,i,r){e.pattern&&(e.pattern instanceof RegExp?(e.pattern.lastIndex=0,e.pattern.test(t)||i.push(d(r.messages.pattern.mismatch,e.fullField,t,e.pattern))):"string"==typeof e.pattern&&(new RegExp(e.pattern).test(t)||i.push(d(r.messages.pattern.mismatch,e.fullField,t,e.pattern))))}};var x="enum";var _=function(e,t,n,i,r){var o=e.type,a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t,o)&&!e.required)return n();S.required(e,t,i,a,r,o),f(t,o)||S.type(e,t,i,a,r)}n(a)},T={string:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t,"string")&&!e.required)return n();S.required(e,t,i,o,r,"string"),f(t,"string")||(S.type(e,t,i,o,r),S.range(e,t,i,o,r),S.pattern(e,t,i,o,r),!0===e.whitespace&&S.whitespace(e,t,i,o,r))}n(o)},method:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t)&&!e.required)return n();S.required(e,t,i,o,r),void 0!==t&&S.type(e,t,i,o,r)}n(o)},number:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t)&&!e.required)return n();S.required(e,t,i,o,r),void 0!==t&&(S.type(e,t,i,o,r),S.range(e,t,i,o,r))}n(o)},boolean:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t)&&!e.required)return n();S.required(e,t,i,o,r),void 0!==t&&S.type(e,t,i,o,r)}n(o)},regexp:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t)&&!e.required)return n();S.required(e,t,i,o,r),f(t)||S.type(e,t,i,o,r)}n(o)},integer:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t)&&!e.required)return n();S.required(e,t,i,o,r),void 0!==t&&(S.type(e,t,i,o,r),S.range(e,t,i,o,r))}n(o)},float:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t)&&!e.required)return n();S.required(e,t,i,o,r),void 0!==t&&(S.type(e,t,i,o,r),S.range(e,t,i,o,r))}n(o)},array:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t,"array")&&!e.required)return n();S.required(e,t,i,o,r,"array"),f(t,"array")||(S.type(e,t,i,o,r),S.range(e,t,i,o,r))}n(o)},object:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t)&&!e.required)return n();S.required(e,t,i,o,r),void 0!==t&&S.type(e,t,i,o,r)}n(o)},enum:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t)&&!e.required)return n();S.required(e,t,i,o,r),t&&S[x](e,t,i,o,r)}n(o)},pattern:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t,"string")&&!e.required)return n();S.required(e,t,i,o,r),f(t,"string")||S.pattern(e,t,i,o,r)}n(o)},date:function(e,t,n,i,r){var o=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(f(t)&&!e.required)return n();if(S.required(e,t,i,o,r),!f(t)){var a=void 0;a="number"==typeof t?new Date(t):t,S.type(e,a,i,o,r),a&&S.range(e,a.getTime(),i,o,r)}}n(o)},url:_,hex:_,email:_,required:function(e,t,n,i,r){var o=[],a=Array.isArray(t)?"array":void 0===t?"undefined":l()(t);S.required(e,t,i,o,r,a),n(o)}};function C(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var k=C();function I(e){this.rules=null,this._messages=k,this.define(e)}I.prototype={messages:function(e){return e&&(this._messages=m(C(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===e?"undefined":l()(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var t=void 0,n=void 0;for(t in e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],r=e,o=n,s=i;if("function"==typeof o&&(s=o,o={}),this.rules&&0!==Object.keys(this.rules).length){if(o.messages){var u=this.messages();u===k&&(u=C()),m(u,o.messages),o.messages=u}else o.messages=this.messages();var f=void 0,h=void 0,v={};(o.keys||Object.keys(this.rules)).forEach(function(n){f=t.rules[n],h=r[n],f.forEach(function(i){var o=i;"function"==typeof o.transform&&(r===e&&(r=a()({},r)),h=r[n]=o.transform(h)),(o="function"==typeof o?{validator:o}:a()({},o)).validator=t.getValidationMethod(o),o.field=n,o.fullField=o.fullField||n,o.type=t.getType(o),o.validator&&(v[n]=v[n]||[],v[n].push({rule:o,value:h,source:r,field:n}))})});var y={};p(v,o,function(e,t){var n=e.rule,i=!("object"!==n.type&&"array"!==n.type||"object"!==l()(n.fields)&&"object"!==l()(n.defaultField));function r(e,t){return a()({},t,{fullField:n.fullField+"."+e})}function s(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(s)||(s=[s]),s.length&&c("async-validator:",s),s.length&&n.message&&(s=[].concat(n.message)),s=s.map(g(n)),o.first&&s.length)return y[n.field]=1,t(s);if(i){if(n.required&&!e.value)return s=n.message?[].concat(n.message).map(g(n)):o.error?[o.error(n,d(o.messages.required,n.field))]:[],t(s);var l={};if(n.defaultField)for(var u in e.value)e.value.hasOwnProperty(u)&&(l[u]=n.defaultField);for(var f in l=a()({},l,e.rule.fields))if(l.hasOwnProperty(f)){var h=Array.isArray(l[f])?l[f]:[l[f]];l[f]=h.map(r.bind(null,f))}var p=new I(l);p.messages(o.messages),e.rule.options&&(e.rule.options.messages=o.messages,e.rule.options.error=o.error),p.validate(e.value,e.rule.options||o,function(e){t(e&&e.length?s.concat(e):e)})}else t(s)}i=i&&(n.required||!n.required&&e.value),n.field=e.field;var u=n.validator(n,e.value,s,e.source,o);u&&u.then&&u.then(function(){return s()},function(e){return s(e)})},function(e){!function(e){var t,n=void 0,i=void 0,r=[],o={};for(n=0;n<e.length;n++)t=e[n],Array.isArray(t)?r=r.concat.apply(r,t):r.push(t);if(r.length)for(n=0;n<r.length;n++)o[i=r[n].field]=o[i]||[],o[i].push(r[n]);else r=null,o=null;s(r,o)}(e)})}else s&&s()},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!T.hasOwnProperty(e.type))throw new Error(d("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?T.required:T[this.getType(e)]||!1}},I.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");T[e]=t},I.messages=k;var F=I,q="ivu-form-item";function O(e,t){for(var n=e,i=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0,o=i.length;r<o-1;++r){var a=i[r];if(!(a in n))throw new Error("[iView warn]: please transfer a valid prop path to form item!");n=n[a]}return{o:n,k:i[r],v:n[i[r]]}}var E={name:"FormItem",mixins:[n("pEmh").a],props:{label:{type:String,default:""},labelWidth:{type:Number},prop:{type:String},required:{type:Boolean,default:!1},rules:{type:[Object,Array]},error:{type:String},validateStatus:{type:Boolean},showMessage:{type:Boolean,default:!0},labelFor:{type:String}},data:function(){return{prefixCls:q,isRequired:!1,validateState:"",validateMessage:"",validateDisabled:!1,validator:{}}},watch:{error:function(e){this.validateMessage=e,this.validateState=""===e?"":"error"},validateStatus:function(e){this.validateState=e},rules:function(){this.setRules()}},inject:["form"],computed:{classes:function(){var e;return[""+q,(e={},r()(e,q+"-required",this.required||this.isRequired),r()(e,q+"-error","error"===this.validateState),r()(e,q+"-validating","validating"===this.validateState),e)]},fieldValue:{cache:!1,get:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),O(e,t).v}}},labelStyles:function(){var e={},t=0===this.labelWidth||this.labelWidth?this.labelWidth:this.form.labelWidth;return(t||0===t)&&(e.width=t+"px"),e},contentStyles:function(){var e={},t=0===this.labelWidth||this.labelWidth?this.labelWidth:this.form.labelWidth;return(t||0===t)&&(e.marginLeft=t+"px"),e}},methods:{setRules:function(){var e=this,t=this.getRules();t.length&&this.required||(t.length?t.every(function(t){e.isRequired=t.required}):this.required&&(this.isRequired=this.required),this.$off("on-form-blur",this.onFieldBlur),this.$off("on-form-change",this.onFieldChange),this.$on("on-form-blur",this.onFieldBlur),this.$on("on-form-change",this.onFieldChange))},getRules:function(){var e=this.form.rules,t=this.rules;return e=e?e[this.prop]:[],[].concat(t||e||[])},getFilteredRule:function(e){return this.getRules().filter(function(t){return!t.trigger||-1!==t.trigger.indexOf(e)})},validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=this.getFilteredRule(e);if(!i||0===i.length){if(!this.required)return n(),!0;i=[{required:!0}]}this.validateState="validating";var r={};r[this.prop]=i;var o=new F(r),a={};a[this.prop]=this.fieldValue,o.validate(a,{firstFields:!0},function(e){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",n(t.validateMessage)}),this.validateDisabled=!1},resetField:function(){this.validateState="",this.validateMessage="";var e=this.form.model,t=this.fieldValue,n=this.prop;-1!==n.indexOf(":")&&(n=n.replace(/:/,"."));var i=O(e,n);Array.isArray(t)?(this.validateDisabled=!0,i.o[i.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,i.o[i.k]=this.initialValue)},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")}},mounted:function(){this.prop&&(this.dispatch("iForm","on-form-item-add",this),Object.defineProperty(this,"initialValue",{value:this.fieldValue}),this.setRules())},beforeDestroy:function(){this.dispatch("iForm","on-form-item-remove",this)}},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes},[e.label||e.$slots.label?n("label",{class:[e.prefixCls+"-label"],style:e.labelStyles,attrs:{for:e.labelFor}},[e._t("label",[e._v(e._s(e.label))])],2):e._e(),e._v(" "),n("div",{class:[e.prefixCls+"-content"],style:e.contentStyles},[e._t("default"),e._v(" "),n("transition",{attrs:{name:"fade"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?n("div",{class:[e.prefixCls+"-error-tip"]},[e._v(e._s(e.validateMessage))]):e._e()])],2)])},staticRenderFns:[]},M=n("VU/8")(E,A,!1,null,null,null);t.a=M.exports},mM4c:function(e,t,n){"use strict";var i=n("Dd8w"),r=n.n(i),o=n("NYxO"),a=n("h/Zt"),s={name:"TaskAddToSectionDialog",props:["sectionID"],data:function(){return{projects:[],ciTaskTransfer:{ciTasks:[],targetKeys:[0],titles:["可添加任务","已添加的任务"],listStyle:{height:"249px"}},formItem:{},ruleCustom:{}}},computed:r()({},Object(o.c)("citaskflow",["ciTaskAddedToSectionDialogShow"])),methods:r()({},Object(o.d)("citaskflow",["setCITaskAddedToSectionDialogShow","setCITaskAddedToSection"]),{addCITaskToSection:function(){for(var e=this,t="",n=0;n<this.ciTaskTransfer.targetKeys.length;n++)this.ciTaskTransfer.targetKeys[n]&&(t=t+this.ciTaskTransfer.targetKeys[n]+",");this.$axios.patch("/api/ci/task_flow/section/"+this.sectionID,{CITasks:t}).then(function(t){e.setCITaskAddedToSectionDialogShow(!1),e.setCITaskAddedToSection(!0)},function(t){e.setCITaskAddedToSectionDialogShow(!1),e.$Message.error({content:"添加任务失败，请联系管理员或者重试",duration:10})})},cancel:function(){this.setCITaskAddedToSectionDialogShow(!1)},transferRender:function(e){return e.label},moveCITasks:function(e,t,n){0!==e.length?this.ciTaskTransfer.targetKeys=e:this.ciTaskTransfer.targetKeys=[0]},transferFilterMethod:function(e,t){return e.label.toUpperCase().indexOf(t.toUpperCase())>-1},loadSectionTasks:function(e){var t=this;console.log(e),e+""!="0"?this.$axios.get("/api/ci/task_flow/section/"+e).then(function(e){var n=e.data.result.CITasks.replace("[","").replace("]","").split(",");t.ciTaskTransfer.targetKeys=[];for(var i=0;i<n.length;i++)t.ciTaskTransfer.targetKeys.push(parseInt(n[i].trim()))},function(e){}):this.ciTaskTransfer.targetKeys=[]},loadMyCITasks:function(){var e=this;this.$axios.get("/api/ci/task_basic/my?page_size=10000").then(function(t){for(var n=t.data.result.results,i=0;i<n.length;i++)e.ciTaskTransfer.ciTasks.push({key:n[i].id,label:n[i].TaskName,description:n[i].Description})},function(e){})}}),created:function(){this.loadMyCITasks(),this.loadSectionTasks(this.sectionID)},mounted:function(){},watch:{sectionID:function(){this.loadSectionTasks(this.sectionID)}},components:{FormItem:a.a}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{value:e.ciTaskAddedToSectionDialogShow,title:"添加任务",width:600,styles:{bottom:"20px",top:"50px"}},on:{"on-ok":e.addCITaskToSection,"on-cancel":e.cancel}},[n("div",{staticStyle:{height:"300px","overflow-y":"scroll","overflow-x":"hidden"}},[n("Form",{ref:"ciTaskAddToSectionCreate",attrs:{model:e.formItem,"label-width":80,rules:e.ruleCustom,id:e.sectionID}},[n("FormItem",{attrs:{label:"",prop:"FlowTaskList"}},[n("Transfer",{attrs:{data:e.ciTaskTransfer.ciTasks,"target-keys":e.ciTaskTransfer.targetKeys,"render-format":e.transferRender,filterable:!0,"filter-method":e.transferFilterMethod,titles:e.ciTaskTransfer.titles,"list-style":e.ciTaskTransfer.listStyle},on:{"on-change":e.moveCITasks}})],1)],1)],1),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[e.ciTaskAddedToSectionDialogShow?n("Button",{staticStyle:{width:"80px",height:"30px"},attrs:{type:"success",shape:"circle"},on:{click:e.addCITaskToSection}},[e._v("确定")]):e._e()],1)])},staticRenderFns:[]};var u=n("VU/8")(s,l,!1,function(e){n("xNPY")},"data-v-29052d59",null);t.a=u.exports},xNPY:function(e,t){}});
//# sourceMappingURL=0.a82f45c357bfe9672388.js.map