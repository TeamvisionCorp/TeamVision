{"version":3,"sources":["webpack:///src/views/ci/citask/CITaskItem.vue","webpack:///./src/views/ci/citask/CITaskItem.vue?8c9c","webpack:///./src/views/ci/citask/CITaskItem.vue","webpack:///src/views/ci/citaskflow/ci_task_flow_item/CITaskFlowItem.vue","webpack:///./src/views/ci/citaskflow/ci_task_flow_item/CITaskFlowItem.vue?5872","webpack:///./src/views/ci/citaskflow/ci_task_flow_item/CITaskFlowItem.vue"],"names":["citask_CITaskItem","render","_vm","this","_h","$createElement","_c","_self","item","staticClass","attrs","bordered","staticStyle","color","text-decoration","href","TaskHistoryURI","_v","_s","TaskName","padding-right","TaskConfigURI","margin-left","type","size","width","display","text-align","margin-top","LastRunStatus","_e","LastRunTime","ParameterGroups","length","trigger","on","on-click","onDPItemClick","padding","shape","max-height","overflow-y","top","slot","_l","dpitem","key","id","name","title","click","$event","onBuildClick","staticRenderFns","Component","__webpack_require__","normalizeComponent","_this","message","_this2","ssrContext","__webpack_exports__","computed","extends_default","Object","vuex_esm","appBodyHeight","flowID","currentSection","methods","result","sectionID","evt","toID","fromID","itemID","toSection","fromSection","response","commandParameter","SectionName","_this3","taskFlowID","_this4","i","value","SectionCreateDialog","CISectionAddDialog","ciTaskItem","CITaskItem","FlowSection","CITaskFlowSection","TaskAddToSectionDialog","SectionTaskAddDialog","ci_task_flow_item_CITaskFlowItem","style","taskContainerHeight","taskFlow","section","columnID","group","itemList","Tasks","columnTitle","dishover","shadow","update:itemList","$set","end","onEnd","reachBottom","onReachBottom","scopedSlots","_u","fn","slotProps","element","dis-hover","border","background-color","margin-right","SectionIndex","font-size","editSection","flowContextMenuClick","height","padding-top","CITaskFlowItem"],"mappings":"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","file":"font/static/js/7.016e145f22870525b1e6.js","sourcesContent":["<template>\n  <div>\n  <Card class=\"citask-card\" v-if=\"item.Display\" :bordered=\"false\">\n    <div class=\"citask-card-title\">\n      <a style=\"color: inherit;text-decoration:underline;\" :href=\"item.TaskHistoryURI\">\n        {{ item.TaskName }}\n      </a>\n      <span class=\"pull-right\" style=\"padding-right: 10px\">\n          <a :href=\"item.TaskConfigURI\"><Icon type=\"ios-settings\" :size=\"18\" color=\"#555\" style=\"margin-left: 10px;\"></Icon></a>\n      </span>\n    </div>\n    <div class=\"citask-card-body\">\n        <span style=\"width: 220px;display: inline-block;text-align: left\">\n          <span style=\"margin-top: 25px;margin-left: 0px;\">\n            <Icon v-if=\"item.LastRunStatus ===1\" type=\"ios-checkmark-circle\" style=\"color:#388e83\"></Icon>\n            <Icon v-if=\"item.LastRunStatus ===2\" type=\"ios-close-circle\" style=\"color:darkred\"></Icon>\n            <Icon v-if=\"item.LastRunStatus ===3\" type=\"ios-remove-circle\" style=\"color:olive\"></Icon>\n            {{ item.LastRunTime }} </span>\n        </span>\n      <span style=\"width:80px;margin-top:25px; display: inline-block\">\n        <Dropdown v-if=\"item.ParameterGroups.length > 0\" trigger=\"click\" @on-click=\"onDPItemClick\" >\n          <Button type=\"default\"  shape=\"circle\" style=\"padding: 3px 15px;\">\n            构建\n            <Icon type=\"md-arrow-dropdown\" />\n          </Button>\n         <DropdownMenu slot=\"list\" style=\"max-height: 500px;overflow-y: scroll;top:0px;\">\n            <DropdownItem v-for=\"dpitem in item.ParameterGroups\" :key=\"dpitem.id\" :name=\"dpitem.id+','+item.id\" ><Icon v-if=\"dpitem.default\" type=\"checkmark-round\"></Icon> {{ dpitem.title }}</DropdownItem>\n         </DropdownMenu>\n         </Dropdown>\n          <Button v-if=\"item.ParameterGroups.length ===0\" type=\"default\"  shape=\"circle\" @click=\"onBuildClick(item.id)\" style=\"padding: 3px 15px;\">\n            构建\n        </Button>\n        </span>\n    </div>\n\n  </Card>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'ciTaskItem',\n    props: ['item'],\n    data () {\n      return {\n        msg: ''\n      }\n    },\n    methods: {\n      onDPItemClick (itemID) {\n        let taskStartParameters = itemID.split(',')\n        this.$axios.get('/api/ci/task_basic/' + taskStartParameters[1] + '/start/?BuildParameter=' + taskStartParameters[0]).then(response => {\n          this.$Message.success({\n            content: response.data.result.message,\n            duration: 10\n          })\n        }, response => {\n          this.$Message.error({\n            content: response.data.result.message,\n            duration: 10\n          })\n        })\n      },\n      onBuildClick (taskID) {\n        this.$axios.get('/api/ci/task_basic/' + taskID + '/start/').then(response => {\n          this.$Message.success({\n            content: response.data.result.message,\n            duration: 10\n          })\n        }, response => {\n          this.$Message.error({\n            content: response.data.result.message,\n            duration: 10\n          })\n        })\n      },\n    }\n  }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n  .citask-card{\n    width: 350px;\n    height: 100px;\n    float: left;\n    margin-left: 10px;\n    margin-top: 10px;\n  }\n  .citask-card-title\n  {\n    margin-left: -16px;\n    margin-right: -16px;\n    margin-top: -10px;\n    padding: 0px;\n    padding-left: 15px;\n    height: 30px;\n    text-align: left;\n    border-bottom: 1px solid #f5f7f9\n  }\n  .citask-card-body{\n\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/ci/citask/CITaskItem.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.item.Display)?_c('Card',{staticClass:\"citask-card\",attrs:{\"bordered\":false}},[_c('div',{staticClass:\"citask-card-title\"},[_c('a',{staticStyle:{\"color\":\"inherit\",\"text-decoration\":\"underline\"},attrs:{\"href\":_vm.item.TaskHistoryURI}},[_vm._v(\"\\n      \"+_vm._s(_vm.item.TaskName)+\"\\n    \")]),_vm._v(\" \"),_c('span',{staticClass:\"pull-right\",staticStyle:{\"padding-right\":\"10px\"}},[_c('a',{attrs:{\"href\":_vm.item.TaskConfigURI}},[_c('Icon',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"ios-settings\",\"size\":18,\"color\":\"#555\"}})],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"citask-card-body\"},[_c('span',{staticStyle:{\"width\":\"220px\",\"display\":\"inline-block\",\"text-align\":\"left\"}},[_c('span',{staticStyle:{\"margin-top\":\"25px\",\"margin-left\":\"0px\"}},[(_vm.item.LastRunStatus ===1)?_c('Icon',{staticStyle:{\"color\":\"#388e83\"},attrs:{\"type\":\"ios-checkmark-circle\"}}):_vm._e(),_vm._v(\" \"),(_vm.item.LastRunStatus ===2)?_c('Icon',{staticStyle:{\"color\":\"darkred\"},attrs:{\"type\":\"ios-close-circle\"}}):_vm._e(),_vm._v(\" \"),(_vm.item.LastRunStatus ===3)?_c('Icon',{staticStyle:{\"color\":\"olive\"},attrs:{\"type\":\"ios-remove-circle\"}}):_vm._e(),_vm._v(\"\\n          \"+_vm._s(_vm.item.LastRunTime)+\" \")],1)]),_vm._v(\" \"),_c('span',{staticStyle:{\"width\":\"80px\",\"margin-top\":\"25px\",\"display\":\"inline-block\"}},[(_vm.item.ParameterGroups.length > 0)?_c('Dropdown',{attrs:{\"trigger\":\"click\"},on:{\"on-click\":_vm.onDPItemClick}},[_c('Button',{staticStyle:{\"padding\":\"3px 15px\"},attrs:{\"type\":\"default\",\"shape\":\"circle\"}},[_vm._v(\"\\n          构建\\n          \"),_c('Icon',{attrs:{\"type\":\"md-arrow-dropdown\"}})],1),_vm._v(\" \"),_c('DropdownMenu',{staticStyle:{\"max-height\":\"500px\",\"overflow-y\":\"scroll\",\"top\":\"0px\"},attrs:{\"slot\":\"list\"},slot:\"list\"},_vm._l((_vm.item.ParameterGroups),function(dpitem){return _c('DropdownItem',{key:dpitem.id,attrs:{\"name\":dpitem.id+','+_vm.item.id}},[(dpitem.default)?_c('Icon',{attrs:{\"type\":\"checkmark-round\"}}):_vm._e(),_vm._v(\" \"+_vm._s(dpitem.title))],1)}))],1):_vm._e(),_vm._v(\" \"),(_vm.item.ParameterGroups.length ===0)?_c('Button',{staticStyle:{\"padding\":\"3px 15px\"},attrs:{\"type\":\"default\",\"shape\":\"circle\"},on:{\"click\":function($event){_vm.onBuildClick(_vm.item.id)}}},[_vm._v(\"\\n          构建\\n      \")]):_vm._e()],1)])]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-51a23638\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/ci/citask/CITaskItem.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-51a23638\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CITaskItem.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CITaskItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CITaskItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-51a23638\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CITaskItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-51a23638\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/ci/citask/CITaskItem.vue\n// module id = null\n// module chunks = ","<template>\n  <div :style=\"'height:'+taskContainerHeight+'px'+'; overflow-y:scroll;padding-left:10px;padding-right:10px;'\">\n    <flow-section v-for=\"section in taskFlow.Sections\" :key=\"section.id\" :columnID=\"section.id\" :group=\"taskFlowID\"\n                  v-bind:itemList.sync=\"section.Tasks\" :columnTitle=\"section.SectionName\" :dishover=\"false\" :shadow=\"false\" :bordered=\"true\"\n                  style=\"margin-left: 10px;\" @end=\"onEnd\" @reachBottom=\"onReachBottom\">\n      <Card  slot='column-header' :bordered=\"false\" :shadow=\"false\" :dis-hover=\"true\" class=\"board-column-title\">\n        <span><Avatar size=\"small\" style=\"border: 1px solid black;background-color: #f5f7f9;color: #5f5f5f;margin-right: 10px;\">{{ section.SectionIndex }}</Avatar>  <span style=\"font-size: 16px;\">{{ section.SectionName }}</span>\n        </span>\n        <span class=\"pull-left cursor-hand\" @click=\"editSection(section.id)\" >\n          <Icon v-if=\"section.Tasks.length<1\" type=\"md-add\" :size=\"16\" color=\"#388e83\" />\n          <Icon v-if=\"section.Tasks.length>0\" type=\"ios-create-outline\" :size=\"16\" color=\"#388e83\"/>\n        </span>\n        <span class=\"pull-right cursor-hand\" style=\"color:#5f5f5f;margin-right: -6px;\">\n          <Dropdown @on-click=\"flowContextMenuClick\">\n        <i class=\"fa fa-bars fa-fw\"></i>\n        <DropdownMenu slot=\"list\">\n            <DropdownItem :name=\"'start:'+section.id\" style=\"height: 20px;padding-top: 2px;text-align: left\">\n              <span style=\"margin-right: 5px;\">\n                <Icon type=\"md-play\"></Icon>\n              </span>\n              <span>执行</span>\n            </DropdownItem>\n            <DropdownItem :name=\"'rename:'+section.id\" style=\"height: 20px;padding-top: 2px;text-align: left\">\n              <span style=\"margin-right: 5px;\">\n                <Icon type=\"md-create\"></Icon>\n              </span>\n              <span>重命名</span>\n            </DropdownItem>\n             <DropdownItem :name=\"'delete:'+section.id\" style=\"height: 20px;padding-top: 2px; text-align: left\">\n              <span style=\"margin-right: 5px;\">\n                <Icon type=\"ios-trash\"></Icon>\n              </span>\n\n              <span>删除</span>\n            </DropdownItem>\n        </DropdownMenu>\n    </Dropdown>\n        </span>\n      </Card>\n      <template slot-scope=\"slotProps\">\n        <ci-task-item :item=\"slotProps.element\"></ci-task-item>\n      </template>\n    </flow-section>\n    <section-create-dialog :flowID=\"taskFlowID\" :sectionID=\"sectionID\"></section-create-dialog>\n    <task-add-to-section-dialog :sectionID=\"sectionID\" ></task-add-to-section-dialog>\n  </div>\n</template>\n\n<script>\n  import store from '../../../../store/index.js'\n  import { mapGetters, mapMutations} from 'vuex'\n  import SectionCreateDialog from './CISectionAddDialog.vue'\n  import TaskAddToSectionDialog from './SectionTaskAddDialog.vue'\n  import ciTaskItem from '../../citask/CITaskItem.vue'\n  import FlowSection from './CITaskFlowSection.vue'\n  export default {\n    name: 'ciTaskFlowItem',\n    props: ['flowID'],\n    data () {\n      return {\n         taskFlow: {\n         },\n        currentSection: 0,\n      }\n    },\n    computed: {\n        ...mapGetters('citaskflow', ['addedSection','ciTaskAddedToSection','sectionRenamed']),\n      ...mapGetters(['appBodyHeight']),\n      taskContainerHeight: function () {\n        return  this.appBodyHeight\n      },\n      taskFlowID: function () {\n        if(this.flowID+'' === 'undefined')\n        {\n          return 0\n        }\n        else\n        {\n          return this.flowID\n        }\n\n      },\n      sectionID: function () {\n        return this.currentSection\n      }\n\n    },\n    methods: {\n      ...mapMutations('citaskflow', ['setAddedSection','setAddedSectionDialogShow','setSectionRenamed','setRenameSectionDialogShow','setCITaskAddedToSectionDialogShow','setCITaskAddedToSection']),\n      loadFlowTasks: function (flowID) {\n        if(flowID+'' !=='0') {\n          this.$axios.get('/api/ci/task_flow/' + flowID + '/').then(response => {\n            this.taskFlow = response.data.result\n          }, response => {\n          })\n        }\n      },\n\n      editSection: function (sectionID) {\n        this.currentSection = sectionID\n        this.setCITaskAddedToSectionDialogShow(true)\n      },\n\n      onReachBottom (columnid) {\n      },\n\n      onEnd (evt) {\n        console.log(evt)\n        let toID = evt.to.getAttribute('id')\n        let fromID = evt.from.getAttribute('id')\n        let itemID = evt.item.getAttribute('id')\n        let itemOldIndex = evt.oldIndex\n//        let itemNewIndex = evt.newIndex\n        let toSection = this.findSection(toID)\n        let fromSection = this.findSection(fromID)\n        toSection.CITaskIDs.push(itemID)\n        fromSection.CITaskIDs.splice(itemOldIndex,1)\n        console.log(toSection)\n        console.log(fromSection)\n        this.$axios.patch('/api/ci/task_flow/section/'+toID,{'CITasks': toSection.CITaskIDs.toString()}).then(response => {\n          console.log(response)\n        }, response => {\n        })\n\n        this.$axios.patch('/api/ci/task_flow/section/'+fromID,{'CITasks': fromSection.CITaskIDs.toString()}).then(response => {\n          console.log(response)\n        }, response => {\n        })\n\n      },\n\n      flowContextMenuClick: function (itemCommand) {\n        let commandArray = itemCommand.split(':')\n        let command = commandArray[0]\n        let commandParameter = commandArray[1]\n        this.currentSection = commandParameter\n        if(command === 'rename')\n        {\n          this.setRenameSectionDialogShow(true)\n        }\n\n        if(command === 'start')\n        {\n          this.startSection(commandParameter)\n        }\n\n        if(command === 'delete')\n        {\n          let sectionName = this.findSection(commandParameter).SectionName\n          this.$Modal.confirm({\n            title: '删除确认',\n            content: '<p>删除是危险操作，确认要删除任务阶段 ['+sectionName+' ] 吗？</p>',\n            onOk: () => {\n              this.deleteFlowSection(commandParameter)\n            },\n            onCancel: () => {\n            }\n          })\n\n        }\n      },\n\n      deleteFlowSection: function (sectionid) {\n        this.$axios.delete('/api/ci/task_flow/section/' + sectionid).then(response => {\n          this.loadFlowTasks(this.taskFlowID)\n        }, response => {\n          // error callback\n        })\n      },\n\n      startSection: function (sectionid) {\n        this.$axios.get('/api/ci/flow_section/' + sectionid+'/start/').then(response => {\n          this.$Message.success({\n            content: response.data.result.message,\n            duration: 10\n          })\n        }, response => {\n          // error callback\n        })\n      },\n\n      findSection: function (sectionID) {\n        let result = null\n        for(let i=0;i<this.taskFlow.Sections.length; i++)\n        {\n          if(this.taskFlow.Sections[i].id+''=== sectionID)\n          {\n            result = this.taskFlow.Sections[i]\n            break\n          }\n        }\n        return result\n      },\n\n    },\n\n    created: function () {\n      this.loadFlowTasks(this.taskFlowID)\n    },\n\n    watch: {\n      addedSection: function (value) {\n        if (value)\n        {\n          this.loadFlowTasks(this.taskFlowID)\n          this.setAddedSection(false)\n        }\n      },\n\n      sectionRenamed: function (value) {\n        if (value)\n        {\n          this.loadFlowTasks(this.taskFlowID)\n          this.setSectionRenamed(false)\n        }\n      },\n\n      ciTaskAddedToSection: function (value) {\n     if (value)\n      {\n         this.loadFlowTasks(this.taskFlowID)\n        this.setCITaskAddedToSection(false)\n      }\n     },\n\n      taskFlowID: function () {\n        this.loadFlowTasks(this.taskFlowID)\n      }\n    },\n\n    components: {\n      SectionCreateDialog,\n      ciTaskItem,\n      FlowSection,\n      TaskAddToSectionDialog\n    }\n  }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n  .env_archive_folder\n  {\n    border:1px solid #f0f0f0;\n    width:250px;\n    height:150px;\n    margin:10px 10px 10px 30px;\n    border-radius:5px;\n    cursor:pointer;\n    float: left;\n    padding:0px;\n  }\n\n  .env_archive_folder_header\n  {\n    height:0px;\n  }\n\n  .env_archive_folder_body\n  {\n    height:90px;\n  }\n\n  .env_archive_folder_body center\n  {\n    padding-top: 10px;\n    color:#d3d7d4;\n  }\n\n  .env_archive_folder_footer\n  {\n    border-top:1px solid #f0f0f0;\n    height:50px;\n  }\n\n  .env_archive_folder_version\n  {\n    padding:10px 5px 5px 5px;\n    font-size: 14px;\n    color: black;\n    overflow:hidden;\n\n  }\n\n  .env_archive_version_file\n  {\n    padding:5px 5px 0px 5px;\n    font-size: 14px;\n    color: black;\n    overflow:hidden;\n\n  }\n\n  .task-flow-title{\n    height: 80px;\n    width: 80px;\n    line-height: 80px;\n    display:inline-block;\n    color: #5e5e5e;\n    text-align:center;\n  }\n\n  .board-column-title{\n    background: #f5f7f9;\n    margin-top:-15px;\n    text-align: center;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/ci/citaskflow/ci_task_flow_item/CITaskFlowItem.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:('height:'+_vm.taskContainerHeight+'px'+'; overflow-y:scroll;padding-left:10px;padding-right:10px;')},[_vm._l((_vm.taskFlow.Sections),function(section){return _c('flow-section',{key:section.id,staticStyle:{\"margin-left\":\"10px\"},attrs:{\"columnID\":section.id,\"group\":_vm.taskFlowID,\"itemList\":section.Tasks,\"columnTitle\":section.SectionName,\"dishover\":false,\"shadow\":false,\"bordered\":true},on:{\"update:itemList\":function($event){_vm.$set(section, \"Tasks\", $event)},\"end\":_vm.onEnd,\"reachBottom\":_vm.onReachBottom},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_c('ci-task-item',{attrs:{\"item\":slotProps.element}})]}}])},[_c('Card',{staticClass:\"board-column-title\",attrs:{\"slot\":\"column-header\",\"bordered\":false,\"shadow\":false,\"dis-hover\":true},slot:\"column-header\"},[_c('span',[_c('Avatar',{staticStyle:{\"border\":\"1px solid black\",\"background-color\":\"#f5f7f9\",\"color\":\"#5f5f5f\",\"margin-right\":\"10px\"},attrs:{\"size\":\"small\"}},[_vm._v(_vm._s(section.SectionIndex))]),_vm._v(\" \"),_c('span',{staticStyle:{\"font-size\":\"16px\"}},[_vm._v(_vm._s(section.SectionName))])],1),_vm._v(\" \"),_c('span',{staticClass:\"pull-left cursor-hand\",on:{\"click\":function($event){_vm.editSection(section.id)}}},[(section.Tasks.length<1)?_c('Icon',{attrs:{\"type\":\"md-add\",\"size\":16,\"color\":\"#388e83\"}}):_vm._e(),_vm._v(\" \"),(section.Tasks.length>0)?_c('Icon',{attrs:{\"type\":\"ios-create-outline\",\"size\":16,\"color\":\"#388e83\"}}):_vm._e()],1),_vm._v(\" \"),_c('span',{staticClass:\"pull-right cursor-hand\",staticStyle:{\"color\":\"#5f5f5f\",\"margin-right\":\"-6px\"}},[_c('Dropdown',{on:{\"on-click\":_vm.flowContextMenuClick}},[_c('i',{staticClass:\"fa fa-bars fa-fw\"}),_vm._v(\" \"),_c('DropdownMenu',{attrs:{\"slot\":\"list\"},slot:\"list\"},[_c('DropdownItem',{staticStyle:{\"height\":\"20px\",\"padding-top\":\"2px\",\"text-align\":\"left\"},attrs:{\"name\":'start:'+section.id}},[_c('span',{staticStyle:{\"margin-right\":\"5px\"}},[_c('Icon',{attrs:{\"type\":\"md-play\"}})],1),_vm._v(\" \"),_c('span',[_vm._v(\"执行\")])]),_vm._v(\" \"),_c('DropdownItem',{staticStyle:{\"height\":\"20px\",\"padding-top\":\"2px\",\"text-align\":\"left\"},attrs:{\"name\":'rename:'+section.id}},[_c('span',{staticStyle:{\"margin-right\":\"5px\"}},[_c('Icon',{attrs:{\"type\":\"md-create\"}})],1),_vm._v(\" \"),_c('span',[_vm._v(\"重命名\")])]),_vm._v(\" \"),_c('DropdownItem',{staticStyle:{\"height\":\"20px\",\"padding-top\":\"2px\",\"text-align\":\"left\"},attrs:{\"name\":'delete:'+section.id}},[_c('span',{staticStyle:{\"margin-right\":\"5px\"}},[_c('Icon',{attrs:{\"type\":\"ios-trash\"}})],1),_vm._v(\" \"),_c('span',[_vm._v(\"删除\")])])],1)],1)],1)])],1)}),_vm._v(\" \"),_c('section-create-dialog',{attrs:{\"flowID\":_vm.taskFlowID,\"sectionID\":_vm.sectionID}}),_vm._v(\" \"),_c('task-add-to-section-dialog',{attrs:{\"sectionID\":_vm.sectionID}})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c8ec9b2a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/ci/citaskflow/ci_task_flow_item/CITaskFlowItem.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c8ec9b2a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CITaskFlowItem.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CITaskFlowItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CITaskFlowItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c8ec9b2a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CITaskFlowItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c8ec9b2a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/ci/citaskflow/ci_task_flow_item/CITaskFlowItem.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}