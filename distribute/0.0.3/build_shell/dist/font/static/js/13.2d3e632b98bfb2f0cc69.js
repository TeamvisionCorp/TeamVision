webpackJsonp([13],{B2vH:function(t,a){},lOdK:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i("Gu7T"),s=i.n(e),r=i("Dd8w"),n=i.n(r),o=(i("IcnI"),i("NYxO")),c={name:"HomeSummary",data:function(){return{toDoSummary:{taskCount:0,issueCount:0,fortestingCount:0},activeProject:[],activity:{next:"",data:[],count:0}}},computed:n()({},Object(o.c)(["appBodyHeight"]),{summaryHeight:function(){return this.appBodyHeight-33},activityHiehgt:function(){var t,a;return console.log((a=new RegExp("(^| )"+"sessionid"+"=([^;]*)(;|$)"),(t=document.cookie.match(a))?t[2]:null)),this.appBodyHeight-110}}),methods:{handleReachBottom:function(){var t=this;this.$axios.get(this.activity.next).then(function(a){var i;t.activity.count=a.data.result.count,t.activity.next=a.data.result.next,(i=t.activity.data).push.apply(i,s()(a.data.result.results))},function(t){})},loadToDoSummary:function(){var t=this;this.$axios.get("/api/home/todo/summary").then(function(a){t.toDoSummary.taskCount=a.data.result.task_count,t.toDoSummary.issueCount=a.data.result.issue_count,t.toDoSummary.fortestingCount=a.data.result.fortesting_count},function(t){})},loadMyProjectList:function(){var t=this;this.$axios.get("/api/project/list?latest=1&my=1").then(function(a){t.activeProject=a.data.result},function(t){})},loadActivity:function(){var t=this;this.$axios.get("/api/home/activity/list").then(function(a){t.activity.count=a.data.result.count,t.activity.next=a.data.result.next,t.activity.data=a.data.result.results},function(t){})}},created:function(){this.loadToDoSummary(),this.loadMyProjectList(),this.loadActivity()},componets:{}},l={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"home-summary"},[i("Row",{attrs:{gutter:16}},[i("Col",{style:"height:"+t.summaryHeight+"px; overflow-y:scroll;",attrs:{lg:18,md:24,sm:24,xs:24}},[i("div",[i("Card",{attrs:{padding:0,"dis-hover":""}},[i("div",{staticClass:"home-summary-card-title"},[t._v("\n          待处理事项:\n        ")]),t._v(" "),i("Row",{attrs:{type:"flex",justify:"space-between"}},[i("Col",{staticStyle:{padding:"20px"},attrs:{span:"8"}},[i("Card",{staticStyle:{height:"100px"},attrs:{padding:20,"dis-hover":""}},[i("div",{staticClass:"summary-number-title"},[t._v("问题:")]),t._v(" "),i("div",{staticClass:"summary-number-content"},[i("a",{staticStyle:{color:"inherit"},attrs:{href:"/home/my/issue"}},[t._v(t._s(t.toDoSummary.issueCount))])])])],1),t._v(" "),i("Col",{staticStyle:{padding:"20px"},attrs:{span:"8"}},[i("Card",{staticStyle:{height:"100px"},attrs:{padding:20,"dis-hover":""}},[i("div",{staticClass:"summary-number-title"},[t._v("提测:")]),t._v(" "),i("div",{staticClass:"summary-number-content"},[i("a",{staticStyle:{color:"inherit"},attrs:{href:"/home/my/fortesting"}},[t._v("\n                   "+t._s(t.toDoSummary.fortestingCount)+"\n                 ")])])])],1),t._v(" "),i("Col",{staticStyle:{padding:"20px"},attrs:{span:"8"}},[i("Card",{staticStyle:{height:"100px"},attrs:{padding:20,"dis-hover":""}},[i("div",{staticClass:"summary-number-title"},[t._v("任务:")]),t._v(" "),i("div",{staticClass:"summary-number-content"},[i("a",{staticStyle:{color:"inherit"},attrs:{href:"/home/my/task"}},[t._v(t._s(t.toDoSummary.taskCount))])])])],1)],1)],1),t._v(" "),i("Card",{staticStyle:{"margin-top":"20px"},attrs:{padding:0,"dis-hover":""}},[i("div",{staticClass:"home-summary-card-title"},[t._v("\n          活跃项目:\n        ")]),t._v(" "),i("Row",{attrs:{gutter:16}},t._l(t.activeProject,function(a){return i("Col",{key:a.id,attrs:{lg:5,md:6,sm:8,xs:12}},[i("Card",{staticStyle:{width:"230px",height:"180px",float:"left",margin:"20px"},attrs:{bordered:!1}},[i("div",{staticStyle:{"text-align":"center",height:"110px"}},[i("a",{attrs:{href:"/project/"+a.id+"/issue/all"}},[i("img",{staticStyle:{width:"80%",height:"80px"},attrs:{src:""+a.PBAvatar}})])]),t._v(" "),i("div",{staticStyle:{"padding-top":"10px",color:"#333","text-align":"center"}},[t._v(t._s(a.PBTitle))])])],1)}))],1)],1)]),t._v(" "),i("Col",{attrs:{lg:6,md:0,sm:0,xs:0}},[i("div",[i("Card",{attrs:{padding:0,"dis-hover":""}},[i("div",{staticClass:"home-summary-card-title"},[t._v("\n          动态:\n        ")]),t._v(" "),i("Timeline",{staticStyle:{padding:"20px","text-align":"left"}},[i("Scroll",{attrs:{"on-reach-bottom":t.handleReachBottom,height:t.activityHiehgt}},t._l(t.activity.data,function(a){return i("TimelineItem",{key:a.id,attrs:{color:"green"}},[i("div",{staticStyle:{"word-break":"break-all","white-space":"normal"}},[i("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(a.ActionTimeStr))]),t._v(" "),i("span",{staticStyle:{"margin-right":"10px"}},[i("Avatar",{staticStyle:{"background-color":"#388E8E"},attrs:{size:"small"}},[t._v(t._s(a.UserName))])],1),t._v(" "),i("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(a.ChangeMessage))]),t._v(" "),i("span",[t._v("\n                  "+t._s(a.ObjectRepr)+"\n                ")])])])}))],1)],1)],1)])],1)],1)},staticRenderFns:[]};var u=i("VU/8")(c,l,!1,function(t){i("B2vH")},"data-v-54c1ee75",null);a.default=u.exports}});
//# sourceMappingURL=13.2d3e632b98bfb2f0cc69.js.map